(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{40:function(n,t,e){n.exports=e(53)},45:function(n,t,e){},53:function(n,t,e){"use strict";e.r(t);var r,a,i=e(0),o=e.n(i),c=e(16),u=e.n(c),s=(e(45),e(1)),l={borderRadius:"4px",breakpoints:{mobile:"375px",tablet:"768px",hd:"1024px",fullHD:"1920px"},colors:{main:"#ffffff",second:"#000000",fonts:{main:"#000000",error:"#FF0000",hover:"#ffffff"},input:{background:"#F2F2F2",backgroundFocus:"#ffffff"}},fonts:{sizes:{mobile:14,tablet:16,desctop:20}},max:function(n){return"@media (max-width: ".concat(n,")")},min:function(n){return"@media (min-width: ".concat(n,")")}},f=e(19),d=e(13),p=e(15),m=e(8);!function(n){n.SET_VIEWPORT_WIDTH="@@main/SET_VIEWPORT_WIDTH",n.GET_TASK_LIST="@@main/GET_TASK_LIST",n.UPDATE_TASK="@@main/UPDATE_TASK",n.CREATE_TASK="@@main/CREATE_TASK",n.DELETE_TASK="@@main/DELETE_TASK"}(r||(r={})),function(n){n.SUCCESS="SUCCESS",n.LOADING="LOADING",n.ERROR="ERROR"}(a||(a={}));var b={taskList:{items:[],status:a.SUCCESS,error:""},updateAction:{id:null,status:a.SUCCESS},deleteAction:{id:null,status:a.SUCCESS},createAction:{status:a.SUCCESS}},h=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.GET_TASK_LIST:var e=t.payload,i=n.taskList;return Object(m.a)({},n,{taskList:Object(m.a)({},i,{},e)});case r.CREATE_TASK:var o=t.payload,c=n.taskList;return o.error||o.status!==a.SUCCESS||c.items.push({id:o.id,title:o.title}),o.error&&(n.taskList.error=o.error),Object(m.a)({},n,{taskList:Object(m.a)({},c,{items:c.items}),createAction:Object(m.a)({},n.createAction,{},o)});case r.DELETE_TASK:var u=t.payload,s=n.taskList;if(u.status===a.SUCCESS){console.log(s);var l=s.items.findIndex((function(n){return n.id===u.id}));console.log(u.id,l),-1!==l&&s.items.splice(l,1)}return u.error&&(n.taskList.error=u.error),Object(m.a)({},n,{taskList:Object(m.a)({},s,{items:s.items}),deleteAction:Object(m.a)({},n.deleteAction,{},u)});default:return Object(m.a)({},n)}},E=e(34),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,x=Object(p.c)({main:h}),g=Object(p.e)(x,v(Object(p.a)(E.a))),k=function(){return Object(d.b)()},O=g,S=e(10),j=e.n(S),y=e(20),w={getList:{uri:"https://test.megapolis-it.ru/api/list",method:"GET"},create:{uri:"https://test.megapolis-it.ru/api/list",method:"POST"},update:{uri:function(n){return"https://test.megapolis-it.ru/api/list/".concat(n)},method:"POST"},delete:{uri:function(n){return"https://test.megapolis-it.ru/api/list/".concat(n)},method:"DELETE"}};function T(n){return{type:r.GET_TASK_LIST,payload:n}}function A(n){return{type:r.CREATE_TASK,payload:n}}function C(n){return{type:r.DELETE_TASK,payload:n}}var L={Main:{getTaskListAsync:function(){return function(){var n=Object(y.a)(j.a.mark((function n(t,e){var r,i,o,c,u;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e().main.taskList.status!==a.LOADING){n.next=4;break}return n.abrupt("return");case 4:return t(T({status:a.LOADING})),i=(r=w.getList).uri,o=r.method,n.next=8,fetch(i,{method:o});case 8:if((c=n.sent).ok){n.next=11;break}throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438");case 11:return n.next=13,c.json();case 13:if(!(u=n.sent).success){n.next=18;break}t(T({status:a.SUCCESS,items:u.data})),n.next=19;break;case 18:throw new Error(u.error);case 19:n.next=24;break;case 21:n.prev=21,n.t0=n.catch(0),t(T({status:a.ERROR,error:n.t0.message}));case 24:case"end":return n.stop()}}),n,null,[[0,21]])})));return function(t,e){return n.apply(this,arguments)}}()},deleteTaskAsync:function(n){return function(){var t=Object(y.a)(j.a.mark((function t(e){var r,i,o,c,u;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(C({id:n,status:a.LOADING})),i=(r=w.delete).uri,o=r.method,t.next=5,fetch(i(n),{method:o});case 5:if((c=t.sent).ok){t.next=8;break}throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438");case 8:return t.next=10,c.json();case 10:if(!(u=t.sent).success){t.next=15;break}e(C({status:a.SUCCESS,id:n})),t.next=16;break;case 15:throw new Error(u.error);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),e(C({id:n,status:a.ERROR,error:t.t0.message}));case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(n){return t.apply(this,arguments)}}()},createTaskAsync:function(n){return function(){var t=Object(y.a)(j.a.mark((function t(e,r){var i,o,c,u,s,l,f;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(A({status:a.LOADING})),o=(i=w.create).uri,c=i.method,t.next=5,fetch(o,{method:c,body:JSON.stringify({title:n})});case 5:if((u=t.sent).ok){t.next=8;break}throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438");case 8:return t.next=10,u.json();case 10:if(s=t.sent,l=s.error,f=s.id,!s.success){t.next=18;break}e(A({status:a.SUCCESS,id:f,title:n})),t.next=19;break;case 18:throw new Error(l);case 19:t.next=25;break;case 21:throw t.prev=21,t.t0=t.catch(0),e(A({status:a.ERROR,error:t.t0.message})),t.t0;case 25:case"end":return t.stop()}}),t,null,[[0,21]])})));return function(n,e){return t.apply(this,arguments)}}()}}},R=e(2);function _(){var n=Object(R.a)(["\n    width: 22px;\n    height: 22px;\n    fill: #666666;\n    cursor: pointer;\n    transition: fill .2s, transform .2s; \n    &:hover {\n        fill: #1890ff;\n        transform: scale(1.2);\n    }\n"]);return _=function(){return n},n}function D(){var n=Object(R.a)(["\n    width: 18px;\n    height: 22px;\n    fill: #F4583F;\n    cursor: pointer;\n    transition: fill .2s, transform .2s; \n    &:hover {\n        fill: #1890ff;\n        transform: scale(1.2);\n    }\n"]);return D=function(){return n},n}function I(){var n=Object(R.a)(["\n    padding: 16px 0 16px 21px;\n    border: 1px solid #E6E6E6;\n    line-height: 17px;\n    vertical-align: middle;\n    ","    \n"]);return I=function(){return n},n}function F(){var n=Object(R.a)(["\n    vertical-align: middle;\n    & > td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n    td:nth-child(1) {\n        width: 20%;\n    }\n    td:nth-child(2) {\n    }\n    td:last-child {\n        width: 83px;\n        & > svg:first-child {\n            margin-right: 28px;\n        }\n    }\n    ","  \n"]);return F=function(){return n},n}function K(){var n=Object(R.a)(["\n    width: 100%;\n    text-align: left;\n    table-layout: fixed;\n    border: 1px solid #E6E6E6;\n    border-radius: ",";\n"]);return K=function(){return n},n}var U=s.b.table(K(),(function(n){return n.theme.borderRadius})),G=s.b.tr(F(),(function(n){var t=n.theme,e=t.max,r=t.breakpoints;return"\n        ".concat(e(r.mobile)," {\n            td:last-child {\n                width: 66px;\n                & > svg:first-child {\n                    margin-right: 16px;\n                }\n            }\n        }\n    ")})),N=s.b.td(I(),(function(n){var t=n.theme,e=t.max,r=t.breakpoints;return"\n        ".concat(e(r.tablet)," {\n            padding: 16px 0 16px 12px;\n        }\n        ").concat(e(r.mobile)," {\n            padding: 16px 5px 16px 9px;\n        }\n    ")})),P=s.b.svg(D()),B=s.b.svg(_()),z=o.a.memo((function(n){var t=n.item,e=n.onDelete,r=n.onEdit,a=Object.keys(t).map((function(n,e){return"id"===n?o.a.createElement(N,{key:e},"\u0417\u0430\u0434\u0430\u0447\u0430 \u2116",t[n]):o.a.createElement(N,{key:e},t[n])}));return o.a.createElement(G,null,a,o.a.createElement(N,null,o.a.createElement(B,{onClick:function(){r(t)}},o.a.createElement("use",{xlinkHref:"/sprite.svg#pancel"})),o.a.createElement(P,{onClick:function(){e(t)}},o.a.createElement("use",{xlinkHref:"/sprite.svg#basket"}))))}),(function(n,t){return n.item.id===t.item.id})),H=o.a.memo((function(n){var t=n.items,e=n.onDelete,r=n.onEdit,a=Object(i.useCallback)((function(n){"function"===typeof e&&e(n)}),[]),c=Object(i.useCallback)((function(n){"function"===typeof r&&r(n)}),[]),u=t.map((function(n){return o.a.createElement(z,{onDelete:a,onEdit:c,item:Object(m.a)({},n),key:n.id})}));return o.a.createElement(U,null,o.a.createElement("tbody",null,u))})),M=e(21);function W(){var n=Object(R.a)(["\n    ","\n"]);return W=function(){return n},n}function V(){var n=Object(R.a)(["\n    margin-bottom: 12px;\n    line-height: 16px;\n    display: block;\n"]);return V=function(){return n},n}function J(){var n=Object(R.a)(["\n    ","\n"]);return J=function(){return n},n}function X(){var n=Object(R.a)(["\n    position: relative;\n    text-align: left;\n"]);return X=function(){return n},n}var $=s.b.div(X()),q=Object(s.b)(M.a)(J(),(function(n){var t=n.theme,e=t.colors,r=t.borderRadius;return"\n        color: ".concat(e.fonts.main,";\n        background-color: ").concat(e.input.background,";\n        border: 1px solid transparent;\n        border-radius: ").concat(r,";\n        transition: background-color .2s, color .2s;\n        height: 40px;\n        width: calc(100% - 12px);\n        padding-left: 10px;\n        &:focus {\n            border: 1px solid #E6E6E6;\n            outline: none;\n            background-color: ").concat(e.input.backgroundFocus,";\n        }\n    ")})),Q=s.b.label(V()),Y=s.b.span(W(),(function(n){var t=n.theme.colors;return"\n        color: ".concat(t.fonts.error,";\n        background-color: transparent;\n        font-size: 12px;\n        line-height: 14px;\n        position: absolute;\n        bottom: -20px;\n    ")})),Z=function(n){var t=n.error,e=n.label;return o.a.createElement($,null,e&&o.a.createElement(Q,{htmlFor:n.id},e),o.a.createElement(q,n),t&&o.a.createElement(Y,null,t))};function nn(){var n=Object(R.a)(["\n    ","\n"]);return nn=function(){return n},n}var tn=s.b.button(nn(),(function(n){var t=n.color,e=n.theme,r=e.borderRadius,a=e.colors,i=e.max,o=e.breakpoints;return"\n        min-width: 148px;\n        border: 1px solid ".concat(t,";\n        border-radius: ").concat(r,";\n        height: 35px;\n        color: ").concat(a.fonts.main,";\n        background-color: ").concat(a.main,";\n        padding: 0 25px;\n        text-align: center;\n        transition: background-color 200ms,color 200ms;\n        cursor: pointer;\n        &:hover {\n            color: ").concat(a.fonts.hover,";\n            background-color: ").concat(t,";\n        }\n        &:focus {\n            color: ").concat(a.fonts.hover,";\n            background-color: ").concat(t,";\n        }\n        ").concat(i(o.mobile)," {\n            min-width: 123px;\n        }\n    ")}));function en(){var n=Object(R.a)(["\n    text-align: left;\n    font-size: 32px;\n    line-height: 37px;\n    font-family: Roboto-Bold;\n    ","   \n"]);return en=function(){return n},n}var rn=s.b.h1(en(),(function(n){var t=n.theme,e=t.max,r=t.breakpoints;return"\n        ".concat(e(r.mobile)," {\n            font-size: 26px;\n        }\n    ")}));function an(){var n=Object(R.a)(["\n    margin: 40px 0;\n    padding: 0 64px;\n    ","\n"]);return an=function(){return n},n}var on=s.b.main(an(),(function(n){var t=n.theme,e=t.max,r=t.breakpoints;return"\n        ".concat(e(r.tablet)," {\n            padding: 0 30px;\n        }\n        ").concat(e(r.mobile)," {\n            padding: 0 10px;\n        }\n    ")})),cn=function(n){var t=n.children,e=document.createElement("div"),r=document.getElementById("modal");return Object(i.useEffect)((function(){return null===r||void 0===r||r.appendChild(e),function(){null===r||void 0===r||r.removeChild(e)}})),u.a.createPortal(t,e)};function un(){var n=Object(R.a)(["\n    ","    \n"]);return un=function(){return n},n}function sn(){var n=Object(R.a)(["\n    ","\n"]);return sn=function(){return n},n}function ln(){var n=Object(R.a)(["\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    display: flex;\n    width: 100%;\n    justify-content: center;\n    align-items: center;\n    display: ",";\n"]);return ln=function(){return n},n}var fn=s.b.div(ln(),(function(n){return n.visibility?"flex":"none"})),dn=s.b.div(sn(),(function(n){var t=n.theme,e=t.borderRadius,r=t.max,a=t.breakpoints;return"\n        border: 1px solid #F2F2F2;\n        border-radius: ".concat(e,";\n        position: relative;\n        background-color: #ffffff;\n        padding: 30px 32px 32px;\n        ").concat(r(a.mobile)," {\n            width: 100%;\n            height: 100%;\n            width: calc(100% - 20px);\n            padding: 60px 10px 10px;\n        }\n    ")})),pn=s.b.svg(un(),(function(n){var t=n.theme,e=t.max,r=t.breakpoints;return"    \n        cursor: pointer;\n        width: 14px;\n        height: 14px;\n        fill: #FF0000;\n        position: absolute;\n        right: 32px;\n        top: 30px;\n        z-index: 1;\n        ".concat(e(r.mobile)," {\n            top: 60px;\n            right: 10px;\n        }\n    ")})),mn=function(n){var t=n.children,e=n.visibility,r=void 0===e||e,a=n.onClose,c=Object(i.useState)(r),u=Object(f.a)(c,2),s=u[0],l=u[1];Object(i.useEffect)((function(){l(r)}),[r]);var d=function(n){n.target.dataset.close&&("function"===typeof a?a():l(!1))};return o.a.createElement(cn,null,o.a.createElement(fn,{"data-close":!0,onClick:d,visibility:s},o.a.createElement(dn,null,o.a.createElement(pn,{"data-close":!0,onClick:d},o.a.createElement("use",{xlinkHref:"/sprite.svg#cross"})),t)))};function bn(){var n=Object(R.a)(["\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 32px;\n"]);return bn=function(){return n},n}var hn=s.b.div(bn()),En=e(3);function vn(){var n=Object(R.a)(["\n    margin-top: 20px;\n    width: 100%;\n    display: flex;\n    justify-content:",";\n    ","\n"]);return vn=function(){return n},n}function xn(){var n=Object(R.a)(["\n    width: 462px;\n    ","\n"]);return xn=function(){return n},n}var gn=s.b.div(xn(),(function(n){var t=n.theme,e=t.max,r=t.breakpoints;return"\n        ".concat(e(r.mobile)," {\n            width: 100%;\n        }\n    ")})),kn=s.b.div(vn(),(function(n){return"right"===n.align?"flex-end":"flex-start"}),(function(n){var t=n.theme,e=t.max,r=t.breakpoints;return"\n        ".concat(e(r.mobile)," {\n            justify-content: center;\n        }\n    ")})),On=function(n){var t=n.description,e=void 0===t?"":t,r=n.disabled,a=void 0!==r&&r,i=n.children,c=n.align,u=void 0===c?"right":c,s=k(),l={title:e},f=function(){var n=Object(y.a)(j.a.mark((function n(t,e){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.title,n.prev=1,n.next=4,s(L.Main.createTaskAsync(r));case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),e.setErrors({title:n.t0.message});case 9:case"end":return n.stop()}}),n,null,[[1,6]])})));return function(t,e){return n.apply(this,arguments)}}();return o.a.createElement(gn,null,o.a.createElement(M.c,{enableReinitialize:!0,initialValues:l,onSubmit:f,validate:function(n){var t={};return 0===n.title.length&&(t.title="\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),t}},(function(n){var t=n.errors;return o.a.createElement(M.b,null,o.a.createElement(Z,{disabled:a,label:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",error:t.title,name:"title",id:"title"}),o.a.createElement(kn,{align:u},i))})))},Sn=o.a.memo((function(n){var t=n.visibility,e=n.onClose;return o.a.createElement(mn,{visibility:t,onClose:function(){"function"===typeof e&&e()}},o.a.createElement(On,null,o.a.createElement(tn,{color:"#39B54A"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))}),(function(n,t){return n.visibility===t.visibility})),jn=L.Main,yn=function(){var n=Object(i.useState)(!1),t=Object(f.a)(n,2),e=t[0],r=t[1],a=Object(d.c)((function(n){return n.main})).taskList,c=a.items,u=(a.error,Object(En.f)()),s=k();Object(i.useEffect)((function(){s(jn.getTaskListAsync())}),[s]);return o.a.createElement(on,null,o.a.createElement(hn,null,o.a.createElement(rn,null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0434\u0430\u0447"),o.a.createElement(tn,{onClick:function(){r(!0)},color:"#39B54A"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),o.a.createElement(H,{onDelete:function(n){s(jn.deleteTaskAsync(n.id))},onEdit:function(n){u.push("/task/".concat(n.id))},items:c}),o.a.createElement(Sn,{onClose:function(){r(!1)},visibility:e}))},wn=e(18);function Tn(){var n=Object(R.a)(["\n    margin-top: 20px;\n"]);return Tn=function(){return n},n}var An=s.b.div(Tn()),Cn=function(){var n=Object(En.g)().id,t=k(),e=Object(d.c)((function(n){return n.main.taskList.items})),r=Object(i.useState)(""),a=Object(f.a)(r,2),c=a[0],u=a[1];return Object(i.useEffect)((function(){if(0===e.length)t(L.Main.getTaskListAsync());else{var r=e.find((function(t){return t.id===parseInt(n)}));r&&u(r.title)}}),[e]),o.a.createElement(on,null,o.a.createElement(rn,null,"\u0417\u0430\u0434\u0430\u0447\u0430 \u2116",n),o.a.createElement(An,null,o.a.createElement(On,{description:c,disabled:!0,align:"left"},o.a.createElement(wn.b,{to:"/"},o.a.createElement(tn,{color:"#0071BC"},"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u0432 \u0441\u043f\u0438\u0441\u043e\u043a")))))};var Ln=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(s.a,{theme:l},o.a.createElement(d.a,{store:O},o.a.createElement(wn.a,null,o.a.createElement(En.c,null,o.a.createElement(En.a,{exact:!0,path:"/",render:function(){return o.a.createElement(yn,null)}}),o.a.createElement(En.a,{path:"/task/:id",render:function(){return o.a.createElement(Cn,null)}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Ln,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.4cc477b3.chunk.js.map