(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{41:function(n,t,e){n.exports=e(54)},46:function(n,t,e){},54:function(n,t,e){"use strict";e.r(t);var r,a,i=e(0),o=e.n(i),c=e(10),s=e.n(c),l=(e(46),e(1)),u={borderRadius:"4px",breakpoints:{mobile:"375px",tablet:"768px",hd:"1024px",fullHD:"1920px"},colors:{main:"#ffffff",second:"#000000",fonts:{main:"#000000",error:"#FF0000",hover:"#ffffff"},input:{background:"#F2F2F2",backgroundFocus:"#ffffff"}},fonts:{sizes:{mobile:14,tablet:16,desctop:20}},max:function(n){return"@media (max-width: ".concat(n,")")},min:function(n){return"@media (min-width: ".concat(n,")")}},d=e(24),f=e(15),m=e(17),p=e(8);!function(n){n.SET_VIEWPORT_WIDTH="@@main/SET_VIEWPORT_WIDTH",n.GET_TASK_LIST="@@main/GET_TASK_LIST",n.UPDATE_TASK="@@main/UPDATE_TASK",n.CREATE_TASK="@@main/CREATE_TASK",n.DELETE_TASK="@@main/DELETE_TASK"}(r||(r={})),function(n){n.SUCCESS="SUCCESS",n.LOADING="LOADING",n.ERROR="ERROR"}(a||(a={}));var b={taskList:{items:[],status:a.SUCCESS,error:""},updateAction:{id:null,status:a.SUCCESS},deleteAction:{id:null,status:a.SUCCESS},createAction:{status:a.SUCCESS}},h=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.GET_TASK_LIST:var e=t.payload,i=n.taskList;return Object(p.a)({},n,{taskList:Object(p.a)({},i,{},e)});case r.CREATE_TASK:var o=t.payload,c=n.taskList;return o.error||o.status!==a.SUCCESS||c.items.push({id:o.id,title:o.title}),o.error&&(n.taskList.error=o.error),Object(p.a)({},n,{taskList:Object(p.a)({},c,{items:c.items}),createAction:Object(p.a)({},n.createAction,{},o)});case r.DELETE_TASK:var s=t.payload,l=n.taskList;if(s.status===a.SUCCESS){console.log(l);var u=l.items.findIndex((function(n){return n.id===s.id}));console.log(s.id,u),-1!==u&&l.items.splice(u,1)}return s.error&&(n.taskList.error=s.error),Object(p.a)({},n,{taskList:Object(p.a)({},l,{items:l.items}),deleteAction:Object(p.a)({},n.deleteAction,{},s)});default:return Object(p.a)({},n)}},v=e(34),E=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.d,x=Object(m.c)({main:h}),g=Object(m.e)(x,E(Object(m.a)(v.a))),k=function(){return Object(f.b)()},O=g,y=e(11),j=e.n(y),S=e(19),w={getList:{uri:"https://test.megapolis-it.ru/api/list",method:"GET"},create:{uri:"https://test.megapolis-it.ru/api/list",method:"POST"},update:{uri:function(n){return"https://test.megapolis-it.ru/api/list/".concat(n)},method:"POST"},delete:{uri:function(n){return"https://test.megapolis-it.ru/api/list/".concat(n)},method:"DELETE"}};function T(n){return{type:r.GET_TASK_LIST,payload:n}}function C(n){return{type:r.CREATE_TASK,payload:n}}function A(n){return{type:r.DELETE_TASK,payload:n}}var L={Main:{getTaskListAsync:function(){return function(){var n=Object(S.a)(j.a.mark((function n(t,e){var r,i,o,c,s;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e().main.taskList.status!==a.LOADING){n.next=4;break}return n.abrupt("return");case 4:return t(T({status:a.LOADING})),i=(r=w.getList).uri,o=r.method,n.next=8,fetch(i,{method:o});case 8:if((c=n.sent).ok){n.next=11;break}throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438");case 11:return n.next=13,c.json();case 13:if(!(s=n.sent).success){n.next=18;break}t(T({status:a.SUCCESS,items:s.data})),n.next=19;break;case 18:throw new Error(s.error);case 19:n.next=24;break;case 21:n.prev=21,n.t0=n.catch(0),t(T({status:a.ERROR,error:n.t0.message}));case 24:case"end":return n.stop()}}),n,null,[[0,21]])})));return function(t,e){return n.apply(this,arguments)}}()},deleteTaskAsync:function(n){return function(){var t=Object(S.a)(j.a.mark((function t(e){var r,i,o,c,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(A({id:n,status:a.LOADING})),i=(r=w.delete).uri,o=r.method,t.next=5,fetch(i(n),{method:o});case 5:if((c=t.sent).ok){t.next=8;break}throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438");case 8:return t.next=10,c.json();case 10:if(!(s=t.sent).success){t.next=15;break}e(A({status:a.SUCCESS,id:n})),t.next=16;break;case 15:throw new Error(s.error);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),e(A({id:n,status:a.ERROR,error:t.t0.message}));case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(n){return t.apply(this,arguments)}}()},createTaskAsync:function(n){return function(){var t=Object(S.a)(j.a.mark((function t(e,r){var i,o,c,s,l,u,d;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(C({status:a.LOADING})),o=(i=w.create).uri,c=i.method,t.next=5,fetch(o,{method:c,body:JSON.stringify({title:n})});case 5:if((s=t.sent).ok){t.next=8;break}throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438");case 8:return t.next=10,s.json();case 10:if(l=t.sent,u=l.error,d=l.id,!l.success){t.next=18;break}e(C({status:a.SUCCESS,id:d,title:n})),t.next=19;break;case 18:throw new Error(u);case 19:t.next=25;break;case 21:throw t.prev=21,t.t0=t.catch(0),e(C({status:a.ERROR,error:t.t0.message})),t.t0;case 25:case"end":return t.stop()}}),t,null,[[0,21]])})));return function(n,e){return t.apply(this,arguments)}}()}}},R=e(2);function _(){var n=Object(R.a)(["\n    width: 22px;\n    height: 22px;\n    fill: #666666;\n    cursor: pointer;\n    transition: fill .2s, transform .2s; \n    &:hover {\n        fill: #1890ff;\n        transform: scale(1.2);\n    }\n"]);return _=function(){return n},n}function D(){var n=Object(R.a)(["\n    width: 18px;\n    height: 22px;\n    fill: #F4583F;\n    cursor: pointer;\n    transition: fill .2s, transform .2s; \n    &:hover {\n        fill: #1890ff;\n        transform: scale(1.2);\n    }\n"]);return D=function(){return n},n}function I(){var n=Object(R.a)(["\n    padding: 16px 0 16px 21px;\n    border: 1px solid #E6E6E6;\n    line-height: 17px;\n    vertical-align: middle;\n    ","    \n"]);return I=function(){return n},n}function F(){var n=Object(R.a)(["\n    vertical-align: middle;\n    & > td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n    td:nth-child(1) {\n        width: 20%;\n    }\n    td:nth-child(2) {\n    }\n    td:last-child {\n        width: 83px;\n        & > svg:first-child {\n            margin-right: 28px;\n        }\n    }\n    ","  \n"]);return F=function(){return n},n}function K(){var n=Object(R.a)(["\n    width: 100%;\n    text-align: left;\n    table-layout: fixed;\n    border: 1px solid #E6E6E6;\n    border-radius: ",";\n"]);return K=function(){return n},n}var N=l.b.table(K(),(function(n){return n.theme.borderRadius})),U=l.b.tr(F(),(function(n){var t=n.theme,e=t.max,r=t.breakpoints;return"\n        ".concat(e(r.mobile)," {\n            td:last-child {\n                width: 66px;\n                & > svg:first-child {\n                    margin-right: 16px;\n                }\n            }\n        }\n    ")})),G=l.b.td(I(),(function(n){var t=n.theme,e=t.max,r=t.breakpoints;return"\n        ".concat(e(r.tablet)," {\n            padding: 16px 0 16px 12px;\n        }\n        ").concat(e(r.mobile)," {\n            padding: 16px 5px 16px 9px;\n        }\n    ")})),z=l.b.svg(D()),P=l.b.svg(_()),B=o.a.memo((function(n){var t=n.item,e=n.onDelete,r=n.onEdit,a=Object.keys(t).map((function(n,e){return"id"===n?o.a.createElement(G,{key:e},"\u0417\u0430\u0434\u0430\u0447\u0430 \u2116",t[n]):o.a.createElement(G,{key:e},t[n])}));return o.a.createElement(U,null,a,o.a.createElement(G,null,o.a.createElement(P,{onClick:function(){r(t)}},o.a.createElement("use",{xlinkHref:"/sprite.svg#pancel"})),o.a.createElement(z,{onClick:function(){e(t)}},o.a.createElement("use",{xlinkHref:"/sprite.svg#basket"}))))}),(function(n,t){return n.item.id===t.item.id})),H=o.a.memo((function(n){var t=n.items,e=n.onDelete,r=n.onEdit,a=Object(i.useCallback)((function(n){"function"===typeof e&&e(n)}),[e]),c=Object(i.useCallback)((function(n){"function"===typeof r&&r(n)}),[r]),s=t.map((function(n){return o.a.createElement(B,{onDelete:a,onEdit:c,item:Object(p.a)({},n),key:n.id})}));return o.a.createElement(N,null,o.a.createElement("tbody",null,s))})),M=e(20);function W(){var n=Object(R.a)(["\n    ","\n"]);return W=function(){return n},n}function V(){var n=Object(R.a)(["\n    margin-bottom: 12px;\n    line-height: 16px;\n    display: block;\n"]);return V=function(){return n},n}function J(){var n=Object(R.a)(["\n    ","\n"]);return J=function(){return n},n}function X(){var n=Object(R.a)(["\n    position: relative;\n    text-align: left;\n"]);return X=function(){return n},n}var Y=l.b.div(X()),q=Object(l.b)(M.a)(J(),(function(n){var t=n.theme,e=t.colors,r=t.borderRadius;return"\n        color: ".concat(e.fonts.main,";\n        background-color: ").concat(e.input.background,";\n        border: 1px solid transparent;\n        border-radius: ").concat(r,";\n        transition: background-color .2s, color .2s;\n        height: 40px;\n        width: calc(100% - 12px);\n        padding-left: 10px;\n        &:focus {\n            border: 1px solid #E6E6E6;\n            outline: none;\n            background-color: ").concat(e.input.backgroundFocus,";\n        }\n    ")})),$=l.b.label(V()),Q=l.b.span(W(),(function(n){var t=n.theme.colors;return"\n        color: ".concat(t.fonts.error,";\n        background-color: transparent;\n        font-size: 12px;\n        line-height: 14px;\n        position: absolute;\n        bottom: -20px;\n    ")})),Z=function(n){var t=n.error,e=n.label;return o.a.createElement(Y,null,e&&o.a.createElement($,{htmlFor:n.id},e),o.a.createElement(q,n),t&&o.a.createElement(Q,null,t))};function nn(){var n=Object(R.a)(["\n    ","\n"]);return nn=function(){return n},n}var tn=l.b.button(nn(),(function(n){var t=n.color,e=n.theme,r=e.borderRadius,a=e.colors,i=e.max,o=e.breakpoints;return"\n        min-width: 148px;\n        border: 1px solid ".concat(t,";\n        border-radius: ").concat(r,";\n        height: 35px;\n        color: ").concat(a.fonts.main,";\n        background-color: ").concat(a.main,";\n        padding: 0 25px;\n        text-align: center;\n        transition: background-color 200ms,color 200ms;\n        cursor: pointer;\n        &:hover {\n            color: ").concat(a.fonts.hover,";\n            background-color: ").concat(t,";\n        }\n        &:focus {\n            color: ").concat(a.fonts.hover,";\n            background-color: ").concat(t,";\n        }\n        ").concat(i(o.mobile)," {\n            min-width: 123px;\n        }\n    ")}));function en(){var n=Object(R.a)(["\n    text-align: left;\n    font-size: 32px;\n    line-height: 37px;\n    font-family: Roboto-Bold;\n    ","   \n"]);return en=function(){return n},n}var rn=l.b.h1(en(),(function(n){var t=n.theme,e=t.max,r=t.breakpoints;return"\n        ".concat(e(r.mobile)," {\n            font-size: 26px;\n        }\n    ")}));function an(){var n=Object(R.a)(["\n    margin: 40px 0;\n    padding: 0 64px;\n    ","\n"]);return an=function(){return n},n}var on=l.b.main(an(),(function(n){var t=n.theme,e=t.max,r=t.breakpoints;return"\n        ".concat(e(r.tablet)," {\n            padding: 0 30px;\n        }\n        ").concat(e(r.mobile)," {\n            padding: 0 10px;\n        }\n    ")})),cn=e(56);function sn(){var n=Object(R.a)(["\n    transition: opacity .15s linear;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    z-index: 2;\n    background-color: #000;\n    transition: opacity 200ms;\n    opacity: 0.5;\n    &.","-exited {\n        visibility: hidden;\n        opacity: 0;\n    }\n    &.","-exiting {\n        opacity: 0;\n    }\n    &.","-entering {\n        opacity: 0.5;\n    }\n"]);return sn=function(){return n},n}function ln(){var n=Object(R.a)(["\n    ","    \n"]);return ln=function(){return n},n}function un(){var n=Object(R.a)(["\n    ","\n"]);return un=function(){return n},n}function dn(){var n=Object(R.a)(["\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    display: flex;\n    width: 100%;\n    z-index: 3;\n    justify-content: center;\n    align-items: center;\n    display: flex;\n    transition: opacity 200ms;\n    &.","-exited {\n        visibility: hidden;\n        opacity: 0;\n    }\n    &.","-exiting {\n        opacity: 0;\n    }\n    &.","-entering {\n        opacity: 1;\n    }\n"]);return dn=function(){return n},n}var fn=l.b.div(dn(),"modal","modal","modal"),mn=l.b.div(un(),(function(n){var t=n.theme,e=t.borderRadius,r=t.max,a=t.breakpoints;return"\n        border: 1px solid #F2F2F2;\n        border-radius: ".concat(e,";\n        position: relative;\n        background-color: #ffffff;\n        padding: 30px 32px 32px;\n        transition: transform 200ms ease-in-out;\n        ").concat(r(a.mobile)," {\n            width: 100%;\n            height: 100%;\n            width: calc(100% - 20px);\n            padding: 60px 10px 10px;\n        }\n        &.").concat("modal","-exited {\n            transform: translateY(calc(-50vh - 50%));\n        }\n        &.").concat("modal","-exiting {\n            transform: translateY(calc(-50vh - 50%));\n        }\n    ")})),pn=l.b.svg(ln(),(function(n){var t=n.theme,e=t.max,r=t.breakpoints;return"    \n        cursor: pointer;\n        width: 14px;\n        height: 14px;\n        fill: #FF0000;\n        position: absolute;\n        right: 32px;\n        top: 30px;\n        z-index: 1;\n        transition: transform 200ms;\n        &:hover {\n            transform: scale(1.1);\n        }\n        ".concat(e(r.mobile)," {\n            top: 60px;\n            right: 10px;\n        }\n    ")})),bn=l.b.div(sn(),"modal","modal","modal"),hn=function(n){var t=n.children,e=n.visibility,r=void 0===e||e,a=n.onClose,s=document.getElementById("modal");Object(i.useEffect)((function(){document.body.style.overflow=r?"hidden":"auto"}),[r]);var l=Object(i.useCallback)((function(n){if(n.target.dataset.close){if("function"!==typeof a)throw new Error("handler onClose required!");a()}}),[]);return Object(c.createPortal)(o.a.createElement(cn.a,{in:r,classNames:"modal",timeout:200},(function(n){return console.log(n),o.a.createElement(o.a.Fragment,null,o.a.createElement(bn,{className:"".concat("modal","-").concat(n)}),o.a.createElement(fn,{className:"".concat("modal","-").concat(n),"data-close":!0,onClick:l},o.a.createElement(mn,{className:"".concat("modal","-").concat(n)},o.a.createElement(pn,{"data-close":!0,onClick:l},o.a.createElement("use",{xlinkHref:"/sprite.svg#cross"})),t)))})),s)};function vn(){var n=Object(R.a)(["\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 32px;\n"]);return vn=function(){return n},n}var En=l.b.div(vn()),xn=e(3);function gn(){var n=Object(R.a)(["\n    margin-top: 20px;\n    width: 100%;\n    display: flex;\n    justify-content:",";\n    ","\n"]);return gn=function(){return n},n}function kn(){var n=Object(R.a)(["\n    width: 462px;\n    ","\n"]);return kn=function(){return n},n}var On=l.b.div(kn(),(function(n){var t=n.theme,e=t.max,r=t.breakpoints;return"\n        ".concat(e(r.mobile)," {\n            width: 100%;\n        }\n    ")})),yn=l.b.div(gn(),(function(n){return"right"===n.align?"flex-end":"flex-start"}),(function(n){var t=n.theme,e=t.max,r=t.breakpoints;return"\n        ".concat(e(r.mobile)," {\n            justify-content: center;\n        }\n    ")})),jn=function(n){var t=n.description,e=void 0===t?"":t,r=n.disabled,a=void 0!==r&&r,i=n.children,c=n.align,s=void 0===c?"right":c,l=n.onSuccess,u=k(),d={title:e},f=function(){var n=Object(S.a)(j.a.mark((function n(t,e){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.title,n.prev=1,n.next=4,u(L.Main.createTaskAsync(r));case 4:"function"===typeof l&&l(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),e.setErrors({title:n.t0.message});case 10:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(t,e){return n.apply(this,arguments)}}();return o.a.createElement(On,null,o.a.createElement(M.c,{enableReinitialize:!0,initialValues:d,onSubmit:f,validate:function(n){var t={};return 0===n.title.length&&(t.title="\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),t}},(function(n){var t=n.errors;return o.a.createElement(M.b,null,o.a.createElement(Z,{disabled:a,label:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",error:t.title,name:"title",id:"title"}),o.a.createElement(yn,{align:s},i))})))},Sn=o.a.memo((function(n){var t=n.visibility,e=n.onClose,r=Object(i.useCallback)((function(){"function"===typeof e&&e()}),[e]);return o.a.createElement(hn,{visibility:t,onClose:r},o.a.createElement(jn,{onSuccess:r},o.a.createElement(tn,{color:"#39B54A"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))}),(function(n,t){return n.visibility===t.visibility})),wn=L.Main,Tn=function(){var n=Object(i.useState)(!1),t=Object(d.a)(n,2),e=t[0],r=t[1],a=Object(f.c)((function(n){return n.main})).taskList.items,c=Object(xn.f)(),s=k();Object(i.useEffect)((function(){s(wn.getTaskListAsync())}),[s]);var l=Object(i.useCallback)((function(){r(!1)}),[]),u=Object(i.useCallback)((function(n){s(wn.deleteTaskAsync(n.id))}),[]),m=Object(i.useCallback)((function(n){c.push("/task/".concat(n.id))}),[]);return o.a.createElement(on,null,o.a.createElement(En,null,o.a.createElement(rn,null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0434\u0430\u0447"),o.a.createElement(tn,{onClick:function(){r(!0)},color:"#39B54A"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),o.a.createElement(H,{onDelete:u,onEdit:m,items:a}),o.a.createElement(Sn,{onClose:l,visibility:e}))},Cn=e(18);function An(){var n=Object(R.a)(["\n    margin-top: 20px;\n"]);return An=function(){return n},n}var Ln=l.b.div(An()),Rn=function(){var n=Object(xn.g)().id,t=k(),e=Object(f.c)((function(n){return n.main.taskList.items})),r=Object(i.useState)(""),a=Object(d.a)(r,2),c=a[0],s=a[1];return Object(i.useEffect)((function(){if(0===e.length)t(L.Main.getTaskListAsync());else{var r=e.find((function(t){return t.id===parseInt(n)}));r&&s(r.title)}}),[e]),o.a.createElement(on,null,o.a.createElement(rn,null,"\u0417\u0430\u0434\u0430\u0447\u0430 \u2116",n),o.a.createElement(Ln,null,o.a.createElement(jn,{description:c,disabled:!0,align:"left"},o.a.createElement(Cn.b,{to:"/"},o.a.createElement(tn,{color:"#0071BC"},"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u0432 \u0441\u043f\u0438\u0441\u043e\u043a")))))};var _n=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(l.a,{theme:u},o.a.createElement(f.a,{store:O},o.a.createElement(Cn.a,null,o.a.createElement(xn.c,null,o.a.createElement(xn.a,{exact:!0,path:"/",render:function(){return o.a.createElement(Tn,null)}}),o.a.createElement(xn.a,{path:"/task/:id",render:function(){return o.a.createElement(Rn,null)}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(_n,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.b0defce1.chunk.js.map